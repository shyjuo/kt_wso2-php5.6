<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title></title>
  <meta name="CREATED" content="20061009;17484000">
  <meta name="CHANGED" content="20061011;10243100">
  <link href="style/api_style.css" rel="stylesheet" type="text/css"
  media="all">
</head>

<body lang="en-US" dir="ltr">
<h1><a name="">WSO2 WSF/Ruby API</a></h1>

<p>WSO2 Web Services Framework/Ruby is a Ruby extension that can be used to
provide and consume Web services. This document covers the API of WSO2
WSF/Ruby extension.</p>
<a id="pre"></a>

<h2><a name="">Member Classes</a></h2>
<a id="client"></a>
<h2><a name="">WSClient</a></h2>
<a id="construct"></a>

<h2><a name="">Constructor</a></h2>
<a id="pre_WSClient"></a>
<ul>
  <li><p><b>WSClient.new(Hash options, String log_file_name)</b></p>
  </li>
</ul>

<p>Constructs a new WSClient object.</p>

<p>Parameters:</p>

<table width="100%" cellspacing="3" style="page-break-inside: avoid" cellpadding="4"
border="1">
  <col><col><thead>
    <tr valign="top">
      <th><p>Parameter</p>
      </th>
      <th><p>Default Value</p>
      </th>
      <th><p>Description</p>
      </th>
    </tr>
  </thead>
  <tbody>
    <tr valign="top">
      <td><p>options</p>
      </td>
      <td><p>None</p>
      </td>
      <td><p align="left">An associative array of options. Both
        message related properties, defined for WSMessage as well as WSClient
        specific options defined below, can be included in the options array
        here. Please note that the "to" option must be specified at some
        level in order to convey the service endpoint to be
        invoked.<var></var></p>

        <p align="left">The following table shows the possible client
        specific options and related details. Please refer to the WSMessage
        constructor documentation for information on message level
        properties that can be used as options.</p>
      </td>
    </tr>
    <tr valign="top">
      <td><p>log_file_name</p>
      </td>
      <td><p>"wsf_ruby_client.log"</p>
      </td>
      <td><p>The name of the log file that the client log messages would get logged into.</p>
      </td>
    </tr>
  </tbody>
</table>

<table cellspacing="3" style="page-break-inside: avoid" cellpadding="4"
border="1">
  <!--<col><col><col><col><col><col><thead>
    <tr valign="top">
      <th style="width: 96px"><p>Parameter</p>
      </th>
      <th colspan="4"><p>Description</p>
      </th>
    </tr>
  </thead>-->
  <tbody>
    <!--<tr valign="top">
      <td style="width: 96px"><p>options</p>
      </td>
      <td colspan="4">
      </td>
    </tr>-->
    <tr valign="top">
      <th style="width: 96px"><p>Option</p>
      </th>
      <th><p>Data Type</p>
      </th>
      <th><p>Value Domain</p>
      </th>
      <th><p>Default Value</p>
      </th>
      <th><p>Description</p>
      </th>
    </tr>
    <tr>
      <td colspan="5" valign="top"><p>Transport Binding/Protocol Related
        Options</p>
      </td>
    </tr>
    <tr valign="top">
      <td style="width: 96px"><p>"use_soap"</p>
      </td>
      <td><p>boolean | double | string</p>
      </td>
      <td><p>TRUE | FALSE | <br>
        1.1 | 1.2 | <br>
        "1.1" | "1.2"</p>
      </td>
      <td><p>TRUE</p>
      </td>
      <td><p>Specifies whether to use SOAP bindings, or not. If FALSE, a REST
        style invocation will take place with the given HTTP method as
        specified by the "http_method" option. 1.1 or "1.1" would make the
        message use SOAP 1.1. 1.2 or "1.2" would make the message use SOAP
        1.2. TRUE means use SOAP 1.2.</p>
      </td>
    </tr>
    <tr valign="top">
      <td style="width: 96px; height: 55px"><p>"http_method"</p>
      </td>
      <td style="height: 55px"><p>string <br>
        case insensitive</p>
      </td>
      <td style="height: 55px"><p>"GET" | "POST" | "post" | "get"</p>
      </td>
      <td style="height: 55px"><p>"POST"</p>
      </td>
      <td style="height: 55px"><p>Specifies which HTTP method to be used.</p>
      </td>
    </tr>
    <tr>
      <td colspan="5" valign="top"><p>XOP/MTOM Related Options</p>
      </td>
    </tr>
    <tr valign="top">
      <td style="height: 51px; width: 96px;"><p>"use_mtom"</p>
      </td>
      <td style="height: 51px"><p>boolean</p>
      </td>
      <td style="height: 51px"><p>TRUE | FALSE</p>
      </td>
      <td style="height: 51px"><p>TRUE</p>
      </td>
      <td style="height: 51px"><p>Indicates whether the attachments should be
        sent MTOM optimized or not. If TRUE, the attachments will be sent out of the
        SOAP message, optimized, with MIME headers in place. If
        FALSE, attachments will be sent within the SOAP payload, as base64
        binary.</p>
      </td>
    </tr>
    <tr valign="top">
      <td style="width: 96px"><p>"response_xop"</p>
      </td>
      <td><p>boolean</p>
      </td>
      <td><p>TRUE | FALSE</p>
      </td>
      <td><p>FALSE</p>
      </td>
      <td><p style="margin-bottom: 0in">Controls whether XOP elements in a
        response with MTOM are resolved into the logically equivalent
	straight XML infoset or not. If TRUE, the options "attachments" and "cid_2_content_type" 
	of the message returned as a result of the calling request
        method would be set. If FALSE, the binary content will be present in
        the response payload in base64 format.</p>
      </td>
    </tr>
    <tr>
      <td colspan="5" valign="top"><p>WS-Addressing Related Options</p>
      </td>
    </tr>
    <tr valign="top">
      <td style="width: 96px"><p>"use_wsa"</p>
      </td>
      <td><p>boolean | double | string</p>
      </td>
      <td><p>TRUE | FALSE | <br>
        1.0 | <br>
        "1.0" | "submission"</p>
      </td>
      <td><p>"1.0"</p>
      </td>
      <td><p>Indicates whether to use WS-Addressing. If TRUE, 1.0 or "1.0", the
        WS-Addressing 1.0 version will be used. If "submission" the
        WS-Addressing submission version will be used. When 1.0, "1.0" or
        "submission" is specified, the "action" must be present. If FALSE, no
        addressing headers will be sent.</p>
      </td>
    </tr>
    <tr valign="top">
      <td colspan="5">WS-Security Related Options</td>
    </tr>
    <tr valign="top">
      <td colspan="1" style="height: 20px; width: 96px;">"policy"</td>
      <td colspan="1" style="height: 20px">WSPolicy object</td>
      <td colspan="1" style="height: 20px">WSPolicy object</td>
      <td colspan="1" style="height: 20px">None</td>
      <td colspan="1" style="height: 20px">WSPolicy Object</td>
    </tr>
    <tr valign="top">
      <td colspan="1" style="height: 21px; width: 96px;">"security_token"</td>
      <td colspan="1" style="height: 21px">WSSecurityToken</td>
      <td colspan="1" style="height: 21px"></td>
      <td colspan="1" style="height: 21px">None</td>
      <td colspan="1" style="height: 21px">WSSecurityToken object which
        contain the security related options</td>
    </tr>
    <tr valign="top">
      <td colspan="5">Proxy and SSL settings related properties</td>
    </tr>
    <tr valign="top">
      <td colspan="1" style="height: 20px; width: 96px;">"proxy_host"</td>
      <td colspan="1" style="height: 20px">string</td>
      <td colspan="1" style="height: 20px">string</td>
      <td colspan="1" style="height: 20px">None</td>
      <td colspan="1" style="height: 20px">proxy host to be used.</td>
    </tr>
    <tr valign="top">
      <td colspan="1" style="height: 21px; width: 96px;">"proxy_port"</td>
      <td colspan="1" style="height: 21px">string</td>
      <td colspan="1" style="height: 21px">string</td>
      <td colspan="1" style="height: 21px">None</td>
      <td colspan="1" style="height: 21px">proxy port to use.</td>
    </tr>
    <!--<tr valign="top">
      <td colspan="5">WSDL Mode</td>
    </tr>
    <tr valign="top">
      <td colspan="1" style="height: 20px; width: 96px;">"wsdl"</td>
      <td colspan="1" style="height: 20px">file path or URL of a WSDL
      file</td>
      <td colspan="1" style="height: 20px">FILE| URL</td>
      <td colspan="1" style="height: 20px">None</td>
      <td colspan="1" style="height: 20px">WSDL file can be used to invoke a
        Web service using dynamic invocation</td>
    </tr>-->
  	<tr>
      <td colspan="5">WSDL Mode</td>
    </tr>
	<tr>
      <td colspan="1" style="height: 20px; width: 96px;">"wsdl"</td>
      <td colspan="1" style="height: 20px">file path or URL of a WSDL
      file</td>
      <td colspan="1" style="height: 20px">string</td>
      <td colspan="1" style="height: 20px">None</td>
      <td colspan="1" style="height: 20px">WSDL file can be used to invoke a
        Web service using dynamic invocation</td>
    </tr>
  </tbody>
</table>

<a id="method"></a>

<h2><a name="">Methods</a></h2>
<a id="pre_WSMessage"></a>
<ul>
  <li><p><b>WSMessage WSClient.request(String message | REXMLDocument
    message | WSMessage message)</b></p>
  </li>
</ul>

<p>Sends a request payload in XML format and receives a response payload in the XML
format.</p>

<p>Parameters:</p>

<table width="100%" cellspacing="3" style="page-break-inside: avoid" cellpadding="4"
border="1">
  <col><col><thead>
    <tr valign="top">
      <th><p>Parameter</p>
      </th>
      <th><p>Description</p>
      </th>
    </tr>
  </thead>
  <tbody>
    <tr valign="top">
      <td><p>message</p>
      </td>
      <td><p>The request message payload to be sent. The type of the parameter can
        be any one of the following types:</p>
        <ul>
          <li><p>String</p>
          </li>
          <li><p>REXMLDocument</p>
          </li>
          <li><p>WSMessage</p>
          </li>
        </ul>

        <p>The message payload is expected to be in valid XML format as
        expected by the service. If MTOM/XOP is to be used, you must use
        WSMessage to represent the message payload.</p>
      </td>
    </tr>
  </tbody>
</table>

<p>Return Values:</p>

<p>The response will be returned as a WSMessage object instance.</p>

<p>Throws WSFault on error.</p>

<br>

<a id="pre_void_WSClient"></a>
<ul>
  <li><p><b>void WSClient.send(String message | REXMLDocument
    message | WSMessage message)</b></p>
  </li>
</ul>

<p>Sends a request message payload in XML. The invocation model is one way,
hence no response will be expected.</p>

<p>Parameters:</p>

<table width="100%" cellspacing="3" style="page-break-inside: avoid" cellpadding="4"
border="1">
  <col><col><thead>
    <tr valign="top">
      <th><p>Parameter</p>
      </th>
      <th><p>Description</p>
      </th>
    </tr>
  </thead>
  <tbody>
    <tr valign="top">
      <td><p>message</p>
      </td>
      <td><p>The request message payload to be sent. The type of the parameter
        can be any one of the following types:</p>
        <ul>
          <li><p>String</p>
          </li>
          <li><p>REXMLDocument</p>
          </li>
          <li><p>WSMessage</p>
          </li>
        </ul>

        <p>The message payload is expected to be in valid XML format as
        expected by the service. If MTOM/XOP is to be used, you must use
        WSMessage to represent the message payload.</p>
      </td>
    </tr>
  </tbody>
</table>

<p>Return Values:</p>

<p>void</p>

<p>Throws WSFault on error.</p>

<h2><a name="">Member Variables</a></h2>
None

<h2><a name="">Example</a></h2>

<pre>
    req_payload_string = &lt;&lt;<span style="color: brown;">XML</span>
        <span style="color: rgb(0, 75, 0);">&lt;ns1:echoString xmlns:ns1="http://ruby.wsf.wso2.net/samples"&gt;
            &lt;text&gt;Hello World!&lt;/text&gt;
	&lt;/ns1:echoString&gt;</span>
    <span style="color: brown;">XML</span>

    client = <span style="color: orange;">WSClient</span>.<span style="color: blue;">new</span>({<span style="color: green;">"to"</span> =&gt; <span style="color: red;">"http://localhost/hello_service/greet"</span>})
                                
    res_message = client.request(req_payload_string)

    <span style="color: rgb(0, 0, 255);">if not</span> res_message.<span style="color: rgb(0, 0, 255);">nil?</span> <span style="color: rgb(0, 0, 255);">then</span>
        <span style="color: rgb(0, 0, 255);">puts</span> <span style="color: red;">"Received OM : "</span> &lt;&lt; <span style="color: red;">"\n"</span> &lt;&lt; res_message.payload_to_s &lt;&lt; <span style="color: red;">"\n\n"</span>
    <span style="color: rgb(0, 0, 255);">end</span>
</pre>

<p></p>
<a id="service"></a>

<h2><a name="">WSService</h2>
<a id="construct1"></a>

<h2><a name="">Constructor</a></h2>
<a id="service_WSService"></a>
<ul>
  <li><p><b>WSService.new (Hash options)</b></p>
  </li>
</ul>

<p>Constructs a new WSService object.</p>

<p>Parameters:</p>

<table cellspacing="3" style="page-break-inside: avoid" cellpadding="4"
border="1">
  <col><col><col><col><col><col><thead>
    <tr valign="top">
      <th><p>Parameter</p>
      </th>
      <th colspan="4"><p>Description</p>
      </th>
    </tr>
  </thead>
  <tbody>
    <tr valign="top">
      <td><p>options</p>
      </td>
      <td colspan="4"><p align="left" style="font-weight: medium">A hash of
        options. The following table shows the possible options and related
        details.</p>
      </td>
    </tr>
    <tr valign="top">
      <th><p>Option</p>
      </th>
      <th><p>Data Type</p>
      </th>
      <th><p>Value Domain</p>
      </th>
      <th><p>Default Value</p>
      </th>
      <th><p>Description</p>
      </th>
    </tr>
    <tr>
      <td colspan="5" valign="top"><p>General Options:</p>
      </td>
    </tr>
    <tr valign="top">
      <td><p>"actions"</p>
      </td>
      <td><p>array</p>
      </td>
      <td><p>Array mapping WS-Addressing actions to service operations</p>
      </td>
      <td><p>None</p>
      </td>
      <td><p>Array mapping WS-Addressing actions to service operations.</p>

        <p>e.g. ("uri1" =&gt; "operation1", "uri2" =&gt; "operation2")</p>

        <p>The above basically means that the service would have two
        operations, "operation1" and "operation2" with WSA actions "uri1" and
        "uri2" respectively.</p>

        <p>If there is an operation, with no WSA action mapping, you can
        specify the array as follows.</p>

        <p>e.g. ("uri3" =&gt; "operation3", "operation4")</p>

        <p>A user defined function implementing an operation of a service
        should have the following syntax:<br>
        <br>
        string | domDocument function1 (WSMessage message);</p>
      </td>
    </tr>
    <tr valign="top">
      <td><p>"operations"</p>
      </td>
      <td><p>array</p>
      </td>
      <td><p>Array mapping operation names to functions</p>
      </td>
      <td><p>None</p>
      </td>
      <td><p>Array mapping operation names to functions.</p>

        <p>e.g. ("operation1" =&gt; "function1", "operation2" =&gt;
        "function2")</p>

        <p>The above basically means that the service would have two
        operations, "operation1" and "operation2" with the implementing
        functions "function1" and "function2" respectively.</p>

        <p>If there is a function, with the same operation name as that of
        the function name, you can specify the array as follows.</p>

        <p>e.g. ("operation3" =&gt; "function3", "function4")</p>

        <p>The above means that there are two operations, namely "operation3"
        and "function4", and that they are implemented by functions "function3" and
        "function4" respectively</p>
      </td>
    </tr>
    <tr valign="top">
      <td><p>"op_mep"</p>
      </td>
      <td><p>array</p>
      </td>
      <td><p>"IN_ONLY" | "IN_OUT"</p>
      </td>
      <td><p>IN_OUT</p>
      </td>
      <td><p>Array mapping operation names to the operation's message
        exchange pattern. This option is only required with reliable
        messaging for one way. By default, the "IN_OUT" message exchange pattern
        is assumed. If explicitly provided by the user, the "IN_ONLY" pattern
        will be used.</p>
      </td>
    </tr>
    <!--
    <tr valign="top">
      <td><p>"opParams"</p>
      </td>
      <td><p>array</p>
      </td>
      <td><p>"WSMESSAGE" | "MIXED"</p>
      </td>
      <td><p>"WSMESSAGE"</p>
      </td>
      <td><p>This option specifies what a PHP function corresponding
        to the service operation would accept as arguments. This option is
        only required when writing a service to use in the WSDL mode. By default, the
        WSMESSAGE is assumed, which means that each function would have a single
        parameter of the type WSMessage.</p>
      </td>
    </tr>
    <tr valign="top">
      <td><p>"wsdl"</p>
      </td>
      <td><p>A file path or a URL pointing to implementing a service's WSDL</p>
      </td>
      <td>FILE | URL</td>
      <td><p>none</p>
      </td>
      <td><p>This option is used to specify the WSDL file of the service.</p>
      </td>
    </tr> -->
    <tr>
      <td colspan="5" valign="top"><p>XOP/MTOM Related Options</p>
      </td>
    </tr>
    <tr valign="top">
      <td><p>"use_mtom"</p>
      </td>
      <td><p>boolean</p>
      </td>
      <td><p>TRUE | FALSE</p>
      </td>
      <td><p>TRUE</p>
      </td>
      <td><p>Indicates whether the attachments should be sent MTOM optimized
        or not. If TRUE, attachments will be sent out of the SOAP message,
        optimized, and with MIME headers in place. If FALSE, attachments will be
        sent within the SOAP payload, as base64 binary.</p>
      </td>
    </tr>
    <tr valign="top">
      <td><p>"request_xop"</p>
      </td>
      <td><p>boolean</p>
      </td>
      <td><p>TRUE | FALSE</p>
      </td>
      <td><p>FALSE</p>
      </td>
      <td><p style="margin-bottom: 0in">Controls whether XOP elements in a
        request with MTOM are resolved into the logically equivalent straight
        XML infoset or not. If TRUE, the member variable "attachments" of the
        WSMessage object passed to the function implementing the operation
        will be set. If FALSE, the binary content will be present in the
        response payload in base64 format.</p>
      </td>
    </tr>
    <tr>
      <td colspan="5" valign="top"><p>WS-Security Related options</p>
      </td>
    </tr>
    <tr valign="top">
      <td style="height: 38px"><p>"policy"</p>
      </td>
      <td style="height: 38px"><p>WSPolicy Object</p>
      </td>
      <td style="height: 38px"><p>WSPolicy Object</p>
      </td>
      <td style="height: 38px"><p>None</p>
      </td>
      <td style="height: 38px">WSPolicy object</td>
    </tr>
    <tr valign="top">
      <td>"security_token"</td>
      <td>WSSecurityToken Object</td>
      <td>WSSecurityToken</td>
      <td>None</td>
      <td>WSSecurityToken object which contains the security related
      options</td>
    </tr>
  	<tr>
      <td colspan="5">WSDL Mode</td>
    </tr>
	<tr>
      <td colspan="1" style="height: 20px; width: 96px;">"wsdl"</td>
      <td colspan="1" style="height: 20px">file path or URL of a WSDL
      file</td>
      <td colspan="1" style="height: 20px">string</td>
      <td colspan="1" style="height: 20px">None</td>
      <td colspan="1" style="height: 20px">This option is used to specify the WSDL file of the service.</td>
    </tr>
  </tbody>
</table>

<a id="method1"></a>

<h2><a name="">Methods</a></h2>
<a id="service_void_WSService"></a>
<ul>
  <li><p><b>void WSService.reply()</b></p>
  </li>
</ul>

<p>Sends the reply in response to a client invocation. Here, the service will
process the request, call the necessary methods and send a response back.</p>

<!--<p>Parameters: void</p>

<p>Return Values: void</p>-->

<p>Throws WSFault on error.</p>

<h2><a name="">Member Variables</a></h2>
None <br>

<h2><a name="">Example</a></h2>

<pre>
    <span style="color: rgb(128, 128, 128); font-style: italic;"># Function that implements the business log</span>
    <span style="color: blue;">def</span> echo_function(in_message)
        return_message = <span style="color: orange;">WSMessage</span>.<span style="color: blue;">new</span>(in_message.payload_to_s)
        
        <span style="color: blue;">return</span> return_message
    <span style="color: blue;">end</span>
 
    <span style="color: rgb(128, 128, 128); font-style: italic;"># How the service is created</span>
    operations = {<span style="color: green;">"echoString"</span> => <span style="color: red;">"echo_function"</span>}
 
    svr = <span style="color: orange;">WSService</span>.<span style="color: blue;">new</span>({<span style="color: green;">"operations"</span> => operations})
        
    res = svr.reply(request, response)
</pre>

<a id="message"></a>

<h2><a name="">WSMessage</a></h2>
The WSMessage class represents a message passed between a client and a service.
This class encapsulates the XML payload in various formats, the WS-Addressing
action information related to the message, the MTOM attachment data, and other
properties related to a message. <a id="construct3"></a>

<h2><a name="">Constructor</a></h2>
<a id="message_WSMessage"></a>
<ul>
  <li><b>WSMessage.new (String str_payload, REXMLDocument rexml_payload, Hash properties)</b></li>
</ul>

<p>Constructs a new WSMessage object.</p>

<p>Parameters:</p>

<table width="100%" cellspacing="3" style="page-break-inside: avoid" cellpadding="4"
border="1">
  <col><col><thead>
    <tr valign="top">
      <th><p>Parameter</p>
      </th>
      <th><p>Default Value</p>
      </th>
      <th><p>Description</p>
      </th>
    </tr>
  </thead>
  <tbody>
    <tr valign="top">
      <td><p>str_payload</p>
      </td>
      <td><p>None</p>
      </td>
      <td><p>A string representing the payload being sent or being received.
	     The payload is expected to be in valid XML format as expected by
        the service.</p>
      </td>
    </tr>
    <tr valign="top">
      <td><p>rexml_payload</p>
      </td>
      <td><p>nil</p>
      </td>
      <td><p>A REXML Document object encapsulating the payload being sent or being received.
	     The payload is expected to be in valid XML format as expected by
        the service.</p>
      </td>
    </tr>
     <tr valign="top">
      <td><p>properties</p>
      </td>
      <td><p>nil</p>
      </td>
      <td><p align="left">A hash of properties.</p>

        <p align="left">The following table shows the possible message level
        properties and related details.</p>
      </td>
    </tr>
  </tbody>
</table>

<table width="100%" cellspacing="3" style="page-break-inside: avoid" cellpadding="4"
border="1">
  <!--<col><col><col><col><col><col><thead>
    <tr valign="top">
      <th><p>Parameter</p>
      </th>
      <th colspan="4"><p>Description</p>
      </th>
    </tr>
  </thead>-->
  <tbody>
    <!--<tr valign="top">
      <td><p>payload</p>
      </td>
      <td colspan="4"> The
        type of the parameter can be any one of the following types:</p>
        <ul>
          <li><p>string</p>
          </li>
          <li><p>domDocument</p>
          </li>
        </ul>

        <p></p>
      </td>
    </tr>
    <tr valign="top">
      <td><p>properties</p>
      </td>
      <td colspan="4"><p align="left">An array of properties.</p>

        <p align="left">The following table shows the possible message level
        properties and related details.</p>
      </td>
    </tr>-->
    <tr valign="top">
      <th style="width: 96px"><p>Option</p>
      </th>
      <th><p>Data Type</p>
      </th>
      <th><p>Value Domain</p>
      </th>
      <th><p>Default Value</p>
      </th>
      <th><p>Description</p>
      </th>
    </tr>
    <tr>
      <td colspan="5" valign="top"><p>General Properties:</p>
      </td>
    </tr>
    <tr valign="top">
      <td style="width: 96px"><p>"to"</p>
      </td>
      <td><p>string</p>
      </td>
      <td><p>A URI</p>
      </td>
      <td><p>None</p>
      </td>
      <td><p>A URI representing the endpoint URI of the
        service to be consumed. This must be present on the server side. In case
        WS-Addressing is in use, this will be used as the WSA "to" header</p>
      </td>
    </tr>
    <tr>
      <td colspan="5" valign="top"><p>WS-Addressing Related Properties:</p>
      </td>
    </tr>
    <tr valign="top">
      <td style="width: 96px"><p>"action"</p>
      </td>
      <td><p>string</p>
      </td>
      <td><p>A URI</p>
      </td>
      <td><p>None</p>
      </td>
      <td><p>xs:anyURI <br clear="all">
        The WS-A action to use when constructing the WS-A headers. A URI
        representing the WSA action that helps uniquely identify the
        operation to be invoked. This is also used as the SOAP Action
        regardless of whether the use_wsa option is specified or not.</p>
      </td>
    </tr>
    <tr valign="top">
      <td style="width: 96px"><p>"from"</p>
      </td>
      <td><p>string</p>
      </td>
      <td><p>A URI</p>
      </td>
      <td><p>None</p>
      </td>
      <td><p>xs:anyURI</p>

        <p>WS-Addressing From. A URI indicating where the response or request
        came from.(Note: This doesn't support reference parameters.) </p>
      </td>
    </tr>
    <tr valign="top">
      <td style="width: 96px"><p>"reply_to"</p>
      </td>
      <td><p>string</p>
      </td>
      <td><p>A URI</p>
      </td>
      <td><p>None</p>
      </td>
      <td><p>xs:anyURI</p>

        <p>WS-Addressing ReplyTo. A URI indicating where the response should
        be sent to. The default value is the anonymous URI (depending on the version).
        (Note: This doesn't support reference parameters.)</p>
      </td>
    </tr>
    <tr valign="top">
      <td style="width: 96px"><p>"fault_to"</p>
      </td>
      <td><p>string</p>
      </td>
      <td><p>A URI</p>
      </td>
      <td><p>None</p>
      </td>
      <td><p>xs:anyURI</p>

        <p>WS-Addressing FaultTo. A URI indicating where the fault should be
        sent to in case of an error. (Note: This doesn't support reference
        parameters.)</p>
      </td>
    </tr>
    <tr>
      <td colspan="5" valign="top"><p>XOP/MTOM Related Properties:</p>
      </td>
    </tr>
    <tr valign="top">
      <td style="width: 96px"><p>"default_attachment_content_type"</p>
      </td>
      <td><p>string</p>
      </td>
      <td><p>MTOM content type</p>
      </td>
      <td><p>"application/octet-stream"</p>
      </td>
      <td><p style="margin-bottom: 0in">Specify a
        default MTOM content type to be used with MTOM attachments. You can
        also specify xmlmime:contentType on the xop:Include element, which
        will override this setting.</p>
      </td>
    </tr>
  </tbody>
</table>

<a id="method3"></a>
<a id="WSMessage_Methods"></a>
<!--<h3><b>Methods</b></h3>

<p>None</p>
<a id="WSMessage_Member_ariables"></a>-->

<h2><a name="">Methods</a></h2>
<ul>
  <a id="WSMessage_payload_to_s"></a>
  <li><p><b>String WSMessage.payload_to_s</b></p>
  </li>
</ul>

<p>Returns payload as a String.</p>

<ul>
  <a id="WSMessage_property"></a>
  <li><p><b>Object WSMessage.property(String property_name)</b></p>
  </li>
</ul>

<p>Returns the property with name "property_name" if found and nil otherwise.</p>

<!--<ul>
  <a id="WSMessage_add_attachment_content"></a>
  <li><p><b>void WSMessage.add_attachment_content(String cid, String content)</b></p>
  </li>
</ul>

<p>This comes in handy when sending binary attachments. Here "cid" is the ID mentioned
in the &lt;XOP:Include&gt; element, and "conttent" contains the string
representation of the binary content to be sent or being received.</p>
<br>

<ul>
  <a id="WSMessage_add_content_type"></a>
  <li><p><b>void WSMessage.add_content_type(String cid, String content_type)</b></p>
  </li>
</ul>

<p>This is useful when receiving binary attachments. Here "cid" is the ID mentioned
in the &lt;XOP:Include&gt; element, and "conttent" contains the string
representation of the binary content to be sent or being received.When an attachment is received, this property
will be present in the WSMessage object.</p>-->

<!--<ul>
  <li><p><b>array headers</b></p>
  </li>
</ul>

<p>An array of SOAP Header objects being sent or being received. </p>-->

<h2><a name="">Example</a></h2>
<pre>
    req_payload_string = &lt;&lt;<span style="color: brown;">XML</span>
        <span style="color: rgb(0, 75, 0);">&lt;ns1:echoString xmlns:ns1="http://ruby.wsf.wso2.net/samples"&gt;
            &lt;text&gt;Hello World!&lt;/text&gt;
	&lt;/ns1:echoString&gt;</span>
    <span style="color: brown;">XML</span>

    req_message = <span style="color: orange;">WSMessage</span>.<span style="color: blue;">new</span>(req_payload_string,
	                        <span style="color: blue;">nil</span>,
				{<span style="color: green;">"to"</span> =&gt; <span style="color: red;">"http://localhost/hello_service/greet"</span>,
                                 <span style="color: green;">"action"</span> =&gt; <span style="color: red;">"http://ruby.axis2.org/samples/echoString"</span>})

    client = <span style="color: orange;">WSClient</span>.<span style="color: blue;">new</span>({<span style="color: green;">"use_wsa"</span> =&gt; <span style="color: blue;">true</span>})
                                
    res_message = client.request(req_message)

    <span style="color: rgb(0, 0, 255);">if not</span> res_message.<span style="color: rgb(0, 0, 255);">nil?</span> <span style="color: rgb(0, 0, 255);">then</span>
        <span style="color: rgb(0, 0, 255);">puts</span> <span style="color: red;">"Received OM : "</span> &lt;&lt; <span style="color: red;">"\n"</span> &lt;&lt; res_message.payload_to_s &lt;&lt; <span style="color: red;">"\n\n"</span>
    <span style="color: rgb(0, 0, 255);">end</span>
</pre>

<a id="fault"></a>

<h2><a name="">WSFault</a></h2>
<a id="construct2"></a>

<h2><a name="">Constructor</a></h2>
<a id="fault_WSFault"></a>
<ul>
  <li><p><b>WSFault.new(String code, String reason, String role, String detail, String xml)</b></p>
  </li>
</ul>

<p>Constructs a new WSFault object.</p>

<p>Parameters:</p>

<table width="100%" cellspacing="3" style="page-break-inside: avoid" cellpadding="4"
border="1">
  <col><col><col><col><col><col><thead>
  </thead>
  <tbody>
    <tr valign="top">
      <th><p>Parameter</p>
      </th>
      <!--<th><p>Data Type</p>
      </th>
      <th><p>Value Domain</p>
      </th>-->
      <th><p>Default Value</p>
      </th>
      <th><p>Description</p>
      </th>
    </tr>
    <tr valign="top">
      <td><p>code</p>
      </td>
      <!--<td><p>string</p>
      </td>
      <td><p>An error code string</p>
      </td>-->
      <td><p>None</p>
      </td>
      <td><p>SOAP fault code. SOAP fault codes are intended to provide a
        means by which faults are classified.<br>
        Please see <a
        href="http://www.w3.org/TR/soap12-part1/#faultcodes">SOAP 1.2
        spec</a> for more information</p>
      </td>
    </tr>
    <tr valign="top">
      <td><p>reason</p>
      </td>
      <!--<td><p>string</p>
      </td>
      <td><p>Reason string</p>
      </td>-->
      <td><p>None</p>
      </td>
      <td><p>SOAP fault reason. Provides a human readable explanation of the
        fault.</p>
      </td>
    </tr>
    <tr valign="top">
      <td><p>role</p>
      </td>
      <!--<td><p>string</p>
      </td>
      <td><p>Role string</p>
      </td>-->
      <td><p>""</p>
      </td>
      <td><p>SOAP fault role. Identifies the role in which the SOAP processing node
        was operating at the time the fault occurred.</p>
      </td>
    </tr>
    <tr valign="top">
      <td><p>detail</p>
      </td>
      <!--<td><p>string</p>
      </td>
      <td><p>Detail string</p>
      </td>-->
      <td><p>""</p>
      </td>
      <td><p>SOAP Fault detail. Contains application specific error
        information.</p>
      </td>
    </tr>
    <tr valign="top">
      <td><p>xml</p>
      </td>
      <!--<td><p>string</p>
      </td>
      <td><p>Detail string</p>
      </td>-->
      <td><p>""</p>
      </td>
      <td><p>SOAP fault as an XML string.</p>
      </td>
    </tr>
  </tbody>
</table>

<a id="method2"></a>

<!--<h3><b>Methods</b></h3>
<a id="A1"></a>
<ul>
  <li><p><b>WSFault-&gt;__toString()</b></p>
    <p>Returns the fault information as a string</p>
  </li>
</ul>
<br>-->
<a id="member_variables"></a>

<h2><a name="">Methods</a></h2>
<ul>
  <a id="WSFault_to_s"></a>
  <li><p><b>String to_s</b></p>
  </li>
</ul>

<p>Returns the fault information as a string.</p>

<ul>
  <a id="WSFault_code"></a>
  <li><p><b>String code</b></p>
  </li>
</ul>

<p>Returns SOAP fault code. SOAP fault codes are intended to provide a means by which
faults are classified.</p>

<ul>
  <a id="WSFault_reason"></a>
  <li><p><b>String reason</b></p>
  </li>
</ul>

<p>Returns SOAP fault reason. Provides a human readable explanation of the fault.</p>

<ul>
  <a id="WSFault_role"></a>
  <li><p><b>String role</b></p>
  </li>
</ul>

<p>Returns SOAP fault role. Identifies the role in which the SOAP processing node was
operating at the time the fault occurred.</p>

<ul>
  <a id="WSFault_detail"></a>
  <li><b>String detail</b></li>
</ul>

<p>Returns SOAP fault detail. Contains application specific error information.</p>

<ul>
  <a id="WSFault_xml"></a>
  <li><b>String xml</b></li>
</ul>

<p>Returns the SOAP fault as an XML string.</p>

<a id="function"></a>

<!--<h2><b>Predefined Functions</b></h2>
<ul>
  <li><h4><a id="ws_request"></a><b>WSMessage ws_request (string payload |
    domDocument payload | WSMessage payload <br>
    [, array options])</b></h4>
  </li>
</ul>

<p>Sends a request, invoking a service and receives the response. Adheres to the
Out-In message exchange pattern.</p>

<p>Parameters:</p>

<table cellspacing="3" style="page-break-inside: avoid" cellpadding="4"
border="1">
  <col><col><thead>
    <tr valign="top">
      <th><p>Parameter</p>
      </th>
      <th><p>Description</p>
      </th>
    </tr>
  </thead>
  <tbody>
    <tr valign="top">
      <td><p>payload</p>
      </td>
      <td><p>Request payload to be sent. The type of the parameter can be any
        one of the following types:</p>
        <ul>
          <li><p>string</p>
          </li>
          <li><p>domDocument</p>
          </li>
          <li><p>WSMessage</p>
          </li>
        </ul>

        <p>The payload is expected to be in valid XML format as expected by
        the service. If MTOM/XOP is to be used, you must use WSMessage to
        represent the payload.</p>
      </td>
    </tr>
    <tr valign="top">
      <td><p>options</p>
      </td>
      <td colspan="1"><p align="left">An associative array of options. Both
        message specific options, defined for WSMessage as well as client
        specific options defined for WSClient can be included in the options
        array. Please refer to the WSClient() constructor method for more
        information on the available options. <var></var></p>
      </td>
    </tr>
  </tbody>
</table>

<p><br>
<br>
</p>

<p>Return Values:</p>

<p>WSMessage object instance representing a response.</p>

<p>Throws WSFault on error.</p>
<br>


<p>Example</p>
<pre><span style="color: rgb(0, 0, 255);">$reqPayloadString</span> = &lt;&lt;&lt;XML
    &lt;ns1:echoString xmlns:ns1=<span style="color: rgb(255, 0, 0);">"http://php.wsf.wso2.net/samples"</span>&gt;
        &lt;text&gt;Hello World!&lt;/text&gt;
    &lt;/ns1:echoString&gt;
XML;

    <span style="color: rgb(0, 0, 255);">$resMessage</span> = ws_request<span style="color: rgb(102, 204, 102);">(</span><span style="color: rgb(0, 0, 255);">$reqPayloadString</span>, 
                        <a href="http://www.php.net/array"><span style="color: rgb(0, 0, 102);">array</span></a><span style="color: rgb(102, 204, 102);">(</span><span style="color: rgb(255, 0, 0);">"to"</span>=&gt;<span style="color: rgb(255, 0, 0);">"http://localhost/echo_service.php"</span><span style="color: rgb(102, 204, 102);">)</span><span style="color: rgb(102, 204, 102);">)</span>;
    
    <a href="http://www.php.net/printf"><span style="color: rgb(0, 0, 102);">printf</span></a><span style="color: rgb(102, 204, 102);">(</span><span style="color: rgb(255, 0, 0);">"Response = %s &lt;br&gt;"</span>, <a href="http://www.php.net/htmlspecialchars"><span style="color: rgb(0, 0, 102);">htmlspecialchars</span></a><span style="color: rgb(102, 204, 102);">(</span><span style="color: rgb(0, 0, 255);">$resMessage</span>-&gt;<span style="color: rgb(0, 102, 0);">str</span><span style="color: rgb(102, 204, 102);">)</span><span style="color: rgb(102, 204, 102);">)</span>;</pre>
<br>

<ul>
  <li><h4><a id="ws_send"></a><b>void ws_send (string payload | domDocument
    payload | WSMessage payload <br>
    [, array options])</b></h4>
  </li>
</ul>

<p>Sends a request, invoking a service. Adheres to the Out-Only message exchange
pattern, hence expects no response. However, throws an WSFault instance in
case of errors.</p>

<p>Parameters:</p>

<table cellspacing="3" style="page-break-inside: avoid" cellpadding="4"
border="1">
  <col><col><thead>
    <tr valign="top">
      <th><p>Parameter</p>
      </th>
      <th><p>Description</p>
      </th>
    </tr>
  </thead>
  <tbody>
    <tr valign="top">
      <td><p>payload</p>
      </td>
      <td><p>Request payload to be sent. The type of the parameter can be any
        one of the following types:</p>
        <ul>
          <li><p>string</p>
          </li>
          <li><p>domDocument</p>
          </li>
          <li><p>WSMessage</p>
          </li>
        </ul>

        <p>The payload is expected to be in valid XML format as expected by
        the service. If MTOM/XOP is to be used, one must use WSMessage to
        represent the payload.</p>
      </td>
    </tr>
    <tr valign="top">
      <td><p>options</p>
      </td>
      <td colspan="1"><p align="left">An associative array of options. Both
        message specific options, defined for WSMessage as well as client
        specific options defined for WSClient can be included in the options
        array. Please refer to the WSClient() constructor method for more
        information on available options. <var></var></p>
      </td>
    </tr>
  </tbody>
</table>

<p><br>
<br>
</p>

<p>Return Values:</p>

<p>void</p>

<p>Throws WSFault on error.</p>
<br>


<p>Example</p>
<pre><span style="color: rgb(0, 0, 255);">$reqPayloadString</span> = &lt;&lt;&lt;XML
        &lt;ns1:notifyString xmlns:ns1=<span style="color: rgb(255, 0, 0);">"http://php.wsf.wso2.net/samples"</span>&gt;
                &lt;text&gt;Hello World!&lt;/text&gt;
        &lt;/ns1:notifyString&gt;
XML;
 
    ws_send<span style="color: rgb(102, 204, 102);">(</span><span style="color: rgb(0, 0, 255);">$reqPayloadString</span>,
               <a href="http://www.php.net/array"><span style="color: rgb(0, 0, 102);">array</span></a><span style="color: rgb(102, 204, 102);">(</span><span style="color: rgb(255, 0, 0);">"to"</span>=&gt;<span style="color: rgb(255, 0, 0);">"http://localhost/reply_notify_service.php"</span><span style="color: rgb(102, 204, 102);">)</span><span style="color: rgb(102, 204, 102);">)</span>;</pre>
<br>

<ul>
  <li><h4><a id="ws_reply"></a><b>void ws_reply (array options)</b></h4>
  </li>
</ul>

<p>Receives a request, processes the request and sends the resulting response. By
default, this method adheres to the In-Out message exchange pattern, however it is
also possible to have the In-Only message exchange pattern, depending on the
nature of the operation being invoked.</p>

<p>Parameters:</p>

<table cellspacing="3" style="page-break-inside: avoid" cellpadding="4"
border="1">
  <col><col><col><col><col><col><thead>
    <tr valign="top">
      <th><p>Parameter</p>
      </th>
      <th colspan="1"><p>Description</p>
      </th>
    </tr>
  </thead>
  <tbody>
    <tr valign="top">
      <td><p>options</p>
      </td>
      <td colspan="1"><p align="left" style="font-weight: medium">An
        associative array of options. Both message specific options, defined
        for WSMessage as well as service specific options defined for
        WSService can be included in the options array here. Please refer to the
        WSService() constructor method for more information on the available
        options.</p>
      </td>
    </tr>
  </tbody>
</table>

<p>Return Values:</p>

<p>void</p>

<p>Throws WSFault on error.</p>
<br>


<p>Example</p>
<pre><span style="color: rgb(0, 0, 0); font-weight: bold;">function</span> echoFunction<span style="color: rgb(102, 204, 102);">(</span><span style="color: rgb(0, 0, 255);">$inMessage</span><span style="color: rgb(102, 204, 102);">)</span> <span style="color: rgb(102, 204, 102);">{</span>
    <span style="color: rgb(0, 0, 255);">$returnMessage</span> = <span style="color: rgb(0, 0, 0); font-weight: bold;">new</span> WSMessage<span style="color: rgb(102, 204, 102);">(</span><span style="color: rgb(0, 0, 255);">$inMessage</span>-&gt;<span style="color: rgb(0, 102, 0);">str</span><span style="color: rgb(102, 204, 102);">)</span>;
    <span style="color: rgb(177, 177, 0);">return</span> <span style="color: rgb(0, 0, 255);">$returnMessage</span>;
<span style="color: rgb(102, 204, 102);">}</span>

ws_reply<span style="color: rgb(102, 204, 102);">(</span><a href="http://www.php.net/array"><span style="color: rgb(0, 0, 102);">array</span></a><span style="color: rgb(102, 204, 102);">(</span><span style="color: rgb(255, 0, 0);">"operations"</span> =&gt; <a href="http://www.php.net/array"><span style="color: rgb(0, 0, 102);">array</span></a><span style="color: rgb(102, 204, 102);">(</span><span style="color: rgb(255, 0, 0);">"echoString"</span> =&gt; <span style="color: rgb(255, 0, 0);">"echoFunction"</span><span style="color: rgb(102, 204, 102);">)</span><span style="color: rgb(102, 204, 102);">)</span><span style="color: rgb(102, 204, 102);">)</span>;</pre>

<p><br>
</p>-->
</body>
</html>
